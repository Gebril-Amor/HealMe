<ion-content class="data-list-content">
        <div class="bg-elements">
    <div class="bubble bubble-1"></div>
    <div class="bubble bubble-2"></div>
    <div class="bubble bubble-3"></div>
  </div>
  
  <div class="data-list-container">
    <div class="data-list-header">
      <h1 class="data-list-title">My Data</h1>
      <p class="data-list-subtitle">View your mood, sleep, and journal history</p>
    </div>

    <!-- Add Data Button -->
    <ion-button expand="block" (click)="goToAddData()" class="add-button">
      <ion-icon name="add" slot="start"></ion-icon>
      Add New Entry
    </ion-button>

    <!-- Tab Navigation -->
   <!-- Tab Navigation -->
    <!-- Tab Navigation -->
<ion-segment [value]="activeTab" (ionChange)="setActiveTab($event)" class="custom-segment">
  <ion-segment-button value="mood">
    <ion-icon name="happy"></ion-icon>

  </ion-segment-button>
  <ion-segment-button value="sleep">
    <ion-icon name="bed"></ion-icon>

  </ion-segment-button>
  <ion-segment-button value="journal">
    <ion-icon name="book"></ion-icon>

  </ion-segment-button>
</ion-segment>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <ion-spinner></ion-spinner>
      <p>Loading your data...</p>
    </div>

    <!-- Mood Tab -->
    <div *ngIf="!isLoading && activeTab === 'mood'" class="tab-content">
      <div *ngIf="moods.length === 0" class="empty-state">
        <ion-icon name="happy-outline" class="empty-icon"></ion-icon>
        <h3>No Mood Entries</h3>
        <p>Start tracking your mood to see your history here.</p>
        <ion-button (click)="goToAddData()">Add First Mood Entry</ion-button>
      </div>

      <ion-list *ngIf="moods.length > 0" class="data-list">
        <ion-item-sliding *ngFor="let mood of moods" class="data-item">
          <ion-item class="mood-item">
            <ion-avatar slot="start" class="mood-avatar" [class]="'mood-color-' + getMoodColor(mood.niveau)">
              <span class="mood-emoji">{{ getMoodEmoji(mood.niveau) }}</span>
            </ion-avatar>
            <ion-label>
              <h2>Level {{ mood.niveau }}/10</h2>
              <p>{{ mood.description || 'No description' }}</p>
              <p class="date">{{ formatDate(mood.date) }}</p>
            </ion-label>
          </ion-item>

          <ion-item-options side="end">
            <ion-item-option color="danger" (click)="deleteMood(mood.id)">
              <ion-icon name="trash" slot="icon-only"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>

    <!-- Sleep Tab -->
    <div *ngIf="!isLoading && activeTab === 'sleep'" class="tab-content">
      <div *ngIf="sleepData.length === 0" class="empty-state">
        <ion-icon name="moon-outline" class="empty-icon"></ion-icon>
        <h3>No Sleep Data</h3>
        <p>Start tracking your sleep to see your history here.</p>
        <ion-button (click)="goToAddData()">Add First Sleep Entry</ion-button>
      </div>

      <ion-list *ngIf="sleepData.length > 0" class="data-list">
        <ion-item-sliding *ngFor="let sleep of sleepData" class="data-item">
          <ion-item class="sleep-item">
            <ion-avatar slot="start" class="sleep-avatar">
              <span class="sleep-emoji">{{ getSleepEmoji(sleep.qualite) }}</span>
            </ion-avatar>
            <ion-label>
              <h2>{{ sleep.dureeHeures }} hours</h2>
              <p>Quality: {{ sleep.qualite }}</p>
              <p class="date">{{ formatDate(sleep.date) }}</p>
            </ion-label>
          </ion-item>

          <ion-item-options side="end">
            <ion-item-option color="danger" (click)="deleteSleep(sleep.id)">
              <ion-icon name="trash" slot="icon-only"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>

    <!-- Journal Tab -->
    <div *ngIf="!isLoading && activeTab === 'journal'" class="tab-content">
      <div *ngIf="journalEntries.length === 0" class="empty-state">
        <ion-icon name="document-text-outline" class="empty-icon"></ion-icon>
        <h3>No Journal Entries</h3>
        <p>Start writing in your journal to see your entries here.</p>
        <ion-button (click)="goToAddData()">Write First Journal Entry</ion-button>
      </div>

      <ion-list *ngIf="journalEntries.length > 0" class="data-list">
        <ion-item-sliding *ngFor="let journal of journalEntries" class="data-item">
          <ion-item class="journal-item" (click)="viewJournalDetail(journal)">
           <ion-avatar slot="start" class="journal-avatar">
          <ion-icon name="book-outline"></ion-icon>
        </ion-avatar>
            <ion-label>
              <h2>Journal Entry</h2>
              <p>{{ truncateText(journal.contenu) }}</p>
              <p class="date">{{ formatDate(journal.date) }}</p>
            </ion-label>
          </ion-item>

          <ion-item-options side="end">
            <ion-item-option color="danger" (click)="deleteJournal(journal.id)">
              <ion-icon name="trash" slot="icon-only"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>
  </div>
</ion-content>