<!-- src/app/pages/register/register.page.html -->
<ion-content class="register-content">
  <!-- Background Elements -->
  <div class="bg-elements">
    <div class="bubble bubble-1"></div>
    <div class="bubble bubble-2"></div>
    <div class="bubble bubble-3"></div>
  </div>

  <div class="register-container">
    <!-- Header -->
    <div class="register-header">
      <div class="register-logo">
        <div class="logo-icon">
          <ion-icon name="person-add"></ion-icon>
        </div>
        <div class="logo-text">NeonGlass</div>
      </div>
      <div class="register-title">Create your account to get started</div>
    </div>

    <!-- Register Form -->
    <form (ngSubmit)="register()" class="register-form">
      <!-- Basic Information -->
      <div class="form-group">
        <label class="input-label">Username *</label>
        <ion-item class="input-item">
          <ion-input 
            type="text" 
            [(ngModel)]="registerData.username" 
            name="username" 
            placeholder="Enter your username"
            required>
          </ion-input>
        </ion-item>
      </div>

      <div class="form-group">
        <label class="input-label">Email *</label>
        <ion-item class="input-item">
          <ion-input 
            type="email" 
            [(ngModel)]="registerData.email" 
            name="email" 
            placeholder="Enter your email"
            required>
          </ion-input>
        </ion-item>
      </div>

      <div class="form-group">
        <label class="input-label">Password *</label>
        <ion-item class="input-item">
          <ion-input 
            type="password" 
            [(ngModel)]="registerData.password" 
            name="password" 
            placeholder="Enter your password"
            required>
          </ion-input>
        </ion-item>
      </div>

      <div class="form-group">
        <label class="input-label">User Type *</label>
        <ion-item class="input-item">
          <ion-select 
            [(ngModel)]="registerData.user_type" 
            name="user_type" 
            (ionChange)="onUserTypeChange()"
            placeholder="Select user type">
            <ion-select-option *ngFor="let type of userTypes" [value]="type.value">
              {{ type.label }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </div>

      <!-- Dynamic Profile Information -->
      <div *ngIf="registerData.user_type === 'patient'" class="profile-section">
        <div class="section-header">Patient Information</div>
        <div class="form-group">
          <label class="input-label">Phone</label>
          <ion-item class="input-item">
            <ion-input 
              type="tel" 
              [(ngModel)]="profileData.phone" 
              name="phone" 
              placeholder="Enter phone number">
            </ion-input>
          </ion-item>
        </div>
        <div class="form-group">
          <label class="input-label">Date of Birth</label>
          <ion-item class="input-item">
            <ion-input 
              type="date" 
              [(ngModel)]="profileData.dateNaissance" 
              name="dateNaissance">
            </ion-input>
          </ion-item>
        </div>
      </div>

      <div *ngIf="registerData.user_type === 'therapeute'" class="profile-section">
        <div class="section-header">Therapist Information</div>
        <div class="form-group">
          <label class="input-label">Specialty</label>
          <ion-item class="input-item">
            <ion-input 
              type="text" 
              [(ngModel)]="profileData.specialite" 
              name="specialite" 
              placeholder="Enter your specialty">
            </ion-input>
          </ion-item>
        </div>
        <div class="form-group">
          <label class="input-label">Phone</label>
          <ion-item class="input-item">
            <ion-input 
              type="tel" 
              [(ngModel)]="profileData.phone" 
              name="phone" 
              placeholder="Enter phone number">
            </ion-input>
          </ion-item>
        </div>
      </div>

      <div *ngIf="registerData.user_type === 'administrateur'" class="profile-section">
        <div class="section-header">Administrator Information</div>
        <div class="form-group">
          <label class="input-label">Department</label>
          <ion-item class="input-item">
            <ion-input 
              type="text" 
              [(ngModel)]="profileData.departement" 
              name="departement" 
              placeholder="Enter department">
            </ion-input>
          </ion-item>
        </div>
      </div>

      <ion-button 
        type="submit" 
        expand="block" 
        class="register-button"
        [disabled]="!registerData.username || !registerData.email || !registerData.password">
        Create Account
      </ion-button>

      <div class="register-footer">
        Already have an account? 
        <a routerLink="/login" class="register-link">Sign in</a>
      </div>
    </form>
  </div>
</ion-content>